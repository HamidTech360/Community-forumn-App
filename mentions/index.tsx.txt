import { useState } from "react";
import { Mention, MentionsInput } from "react-mentions";
import { defaultStyle, defaultMentionStyle } from "./mentionStyles";

const users = [
  {
    id: "jack",
    display: "Jack"
  },
  {
    id: "john",
    display: "john"
  },
  {
    id: "walter",
    display: "Walter White"
  },
  {
    id: "pipilu",
    display: "皮皮鲁"
  },
  {
    id: "luxixi",
    display: "鲁西西"
  },
  {
    id: "satoshi1",
    display: "中本聪"
  },
  {
    id: "satoshi2",
    display: "サトシ・ナカモト"
  },
  {
    id: "nobi",
    display: "野比のび太"
  },
  {
    id: "sung",
    display: "성덕선"
  },
  {
    id: "jesse",
    display: "Jesse Pinkman"
  },
  {
    id: "gus",
    display: 'Gustavo "Gus" Fring'
  },
  {
    id: "saul",
    display: "Saul Goodman"
  },
  {
    id: "hank",
    display: "Hank Schrader"
  },
  {
    id: "skyler",
    display: "Skyler White"
  },
  {
    id: "mike",
    display: "Mike Ehrmantraut"
  },
  {
    id: "lydia",
    display: "Lydìã Rôdarté-Qüayle"
  }
];

const fetchUsers = (query, callback) => {
  if (!query) return;

  setTimeout(() => {
    const filteredUsers = users.filter(user =>
      user.display.toLowerCase().includes(query)
    );
    callback(filteredUsers);
  }, 200);
};

function Mentions() {
  const [value, setValue] = useState("");
  const onChange = e => {
    console.log("onChange", e);
    setValue(e.target.value);
  };
  const onAdd = e => {
    console.log("onAdd", e);
  };
  return (
    <div className="single-line">
      <h3>Single line input</h3>

      <MentionsInput
        // singleLine
        value={value}
        onChange={onChange}
        placeholder={"Mention people using '@'"}
        a11ySuggestionsListLabel={"Suggested mentions"}
        style={defaultStyle}
      >
        <Mention data={fetchUsers} onAdd={onAdd} style={defaultMentionStyle} />
      </MentionsInput>
    </div>
  );
}

export default Mentions;
